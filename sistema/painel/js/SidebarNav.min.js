/* jQuery SidebaNav Bootstrap
 *
 * 2016
 * By Dian Anarchyta nodaluka.com
 *
 * Script for demo Only
 */
! function($) {
    "use strict";
    
    $.fn.SidebarNav = function(options) {
        var settings = $.extend({
            animationSpeed: 300
        }, options);
        
        return this.each(function() {
            $(this).on("click", "li a", function(e) {
                var $this = $(this).next();
                
                if ($this.is(".treeview-menu") && $this.is(":visible")) {
                    $this.slideUp(settings.animationSpeed, function() {
                        $this.removeClass("menu-open");
                    });
                    $this.parent("li").removeClass("active");
                } else if ($this.is(".treeview-menu") && !$this.is(":visible")) {
                    var $parent = $(this).parents("ul").first();
                    var $opened = $parent.find("ul:visible").slideUp(settings.animationSpeed);
                    $opened.removeClass("menu-open");
                    var $parentLi = $(this).parent("li");
                    $this.slideDown(settings.animationSpeed, function() {
                        $this.addClass("menu-open");
                        $parent.find("li.active").removeClass("active");
                        $parentLi.addClass("active");
                    });
                }
                
                if ($this.is(".treeview-menu")) {
                    e.preventDefault();
                }
            });
        });
    };
    
}(jQuery);
